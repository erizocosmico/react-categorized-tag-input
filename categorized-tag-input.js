!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.CategorizedTagInput=t(require("react")):e.CategorizedTagInput=t(e.React)}(this,function(e){return function(e){function t(n){if(a[n])return a[n].exports;var s=a[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),r=n(s);t.default=r.default,e.exports=t.default},function(e,t,a){e.exports=a(9)()},function(t,a){t.exports=e},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(2),r=n(s),i=a(1),o=n(i),l=r.default.createClass({displayName:"Tag",propTypes:{selected:o.default.bool,input:o.default.string.isRequired,text:o.default.string.isRequired,addable:o.default.bool,deletable:o.default.bool,onAdd:o.default.func,onDelete:o.default.func,style:o.default.object},getDefaultProps:function(){return{text:""}},tagContent:function(){var e=[],t=this.props.text.trim().toLowerCase().indexOf(this.props.input.trim().toLowerCase()),a=t+this.props.input.length;return t>0&&e.push(r.default.createElement("span",{key:1,className:"cti__tag__content--regular"},this.props.text.substring(0,t))),e.push(r.default.createElement("span",{key:2,className:"cti__tag__content--match"},this.props.text.substring(t,a))),a<this.props.text.length&&e.push(r.default.createElement("span",{key:3,className:"cti__tag__content--regular"},this.props.text.substring(a))),e},onClick:function(e){e.preventDefault(),this.props.addable&&this.props.onAdd(e)},onDelete:function(e){e.preventDefault(),e.stopPropagation(),this.props.onDelete(e)},getDeleteBtn:function(){var e=this.props.style||{},t=e.delete?e.delete:{};return r.default.createElement("span",{className:"cti__tag__delete",onClick:this.onDelete,dangerouslySetInnerHTML:{__html:"&times;"},style:t})},render:function(){var e=null;this.props.deletable&&(e=this.getDeleteBtn());var t="cti__tag"+(this.props.selected?" cti-selected":""),a=this.props.style||{};return r.default.createElement("div",{className:t,onClick:this.onClick,style:a.base||{}},r.default.createElement("div",{className:"cti__tag__content",style:a.content||{}},this.tagContent()),e)}});t.default=l,e.exports=t.default},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function r(e){return"string"==typeof e&&e.trim().length>0}function i(e){return"object"==typeof e&&e.id&&e.title&&e.items&&Array.isArray(e.items)&&e.items.every(r)&&(e.type||e.single)}Object.defineProperty(t,"__esModule",{value:!0}),t.isCategoryItemValid=r,t.isCategoryValid=i;var o=a(2),l=s(o),u=a(6),c=s(u),d=a(7),p=s(d),f=a(8),h=n(f),g=a(1),m=s(g),y=l.default.createClass({displayName:"CategorizedTagInput",propTypes:{addNew:m.default.bool,categories:m.default.arrayOf(m.default.object).isRequired,transformTag:m.default.func,value:m.default.arrayOf(m.default.object),onBlur:m.default.func,onChange:m.default.func,placeholder:m.default.string,getTagStyle:m.default.func,getCreateNewText:m.default.func},getInitialState:function(){return{value:"",selection:{item:0,category:0},panelOpened:!1,categories:[],addNew:void 0===this.props.addNew||this.props.addNew}},getDefaultProps:function(){return{onChange:function(e){}}},componentWillMount:function(){if(!this.props.categories.every(i))throw new Error("invalid categories source provided for react-categorized-tag-input")},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},filterCategories:function(e){var t=this,a=this.props.categories.map(function(a){return a=Object.assign({},a,{items:a.items.filter(t.filterItems(e))}),0!==a.items.length||t.state.addNew&&!a.single?a:null}).filter(function(e){return null!==e}),n=this.state.selection;this.state.selection.category>=a.length?n={category:0,item:0}:n.item>=a[n.category].items.length&&(n.item=0),this.setState({categories:a,selection:n})},filterItems:function(e){return function(t){return 1===e.length?t.toLowerCase().trim()===e:t.toLowerCase().indexOf(e.trim().toLowerCase())>=0}},openPanel:function(){this.setState({panelOpened:!0})},closePanel:function(){var e=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.timeout=void 0,e.setState({panelOpened:!1})},150)},onValueChange:function(e){var t=e.target.value;this.setState({value:t,panelOpened:t.trim().length>0||!isNaN(Number(t.trim()))}),this.filterCategories(t)},onTagDeleted:function(e){var t=this.props.value.slice();t.splice(e,1),this.props.onChange(t)},onAdd:function(e){var t=this.props.value.concat([e]);this.setState({value:"",panelOpened:!0}),this.refs.input.focusInput(),this.props.onChange(t)},addSelectedTag:function(){if(this.state.panelOpened&&this.state.value.length>0){var e=this.state.categories[this.state.selection.category],t=e.items[this.state.selection.item];this.onAdd({category:e.id,title:t||this.state.value})}},handleBackspace:function(e){0===this.state.value.trim().length&&(e.preventDefault(),this.onTagDeleted(this.props.value.length-1))},handleArrowLeft:function(){var e=this.state.selection.item-1;this.setState({selection:{category:this.state.selection.category,item:e>=0?e:0}})},handleArrowUp:function(){var e=this.state.selection.category-1;this.setState({selection:{category:e>=0?e:0,item:0}})},handleArrowRight:function(){var e=this.state.selection.item+1,t=this.state.categories[this.state.selection.category];this.setState({selection:{category:this.state.selection.category,item:e<=t.items.length?e:t.items.length}})},handleArrowDown:function(){var e=this.state.selection.category+1,t=this.state.categories;this.setState({selection:{category:e<t.length?e:t.length-1,item:0}})},onKeyDown:function(e){switch(e.keyCode){case h.TAB:case h.ENTER:if(!this.state.value)break;case h.COMMA:e.preventDefault(),this.addSelectedTag();break;case h.BACKSPACE:this.handleBackspace(e);break;case h.LEFT:this.handleArrowLeft();break;case h.UP:this.handleArrowUp();break;case h.RIGHT:this.handleArrowRight();break;case h.DOWN:this.handleArrowDown()}},render:function(){return l.default.createElement("div",{className:"cti__root"},l.default.createElement(c.default,{openPanel:this.openPanel,closePanel:this.closePanel,onValueChange:this.onValueChange,onTagDeleted:this.onTagDeleted,onKeyDown:this.onKeyDown,placeholder:this.props.placeholder,value:this.state.value,getTagStyle:this.props.getTagStyle,tags:this.props.value,transformTag:this.props.transformTag,onBlur:this.props.onBlur,ref:"input"}),this.state.panelOpened&&this.state.value.length>0?l.default.createElement(p.default,{categories:this.state.categories,selection:this.state.selection,onAdd:this.onAdd,input:this.state.value,getCreateNewText:this.props.getCreateNewText,addNew:void 0===this.props.addNew||this.props.addNew}):"")}});t.default=y},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(2),r=n(s),i=a(3),o=n(i),l=a(1),u=n(l),c=function(e,t){return"Create new "+e+' "'+t+'"'},d=r.default.createClass({displayName:"Category",propTypes:{items:u.default.array.isRequired,category:u.default.oneOfType([u.default.string,u.default.number]).isRequired,title:u.default.string.isRequired,selected:u.default.bool.isRequired,selectedItem:u.default.number.isRequired,input:u.default.string.isRequired,addNew:u.default.bool,type:u.default.string,onAdd:u.default.func.isRequired,single:u.default.bool,getTagStyle:u.default.func,getCreateNewText:u.default.func},onAdd:function(e){var t=this;return function(){t.props.onAdd({category:t.props.category,title:e})}},onCreateNew:function(e){e.preventDefault(),this.onAdd(this.props.input)()},getTagStyle:function(e){return this.props.getTagStyle?this.props.getTagStyle(e):{}},itemToTag:function(e,t){return r.default.createElement(o.default,{selected:this.isSelected(t),input:this.props.input,text:e,addable:!0,deletable:!1,onAdd:this.onAdd(e),key:e+"_"+t,style:this.getTagStyle(e)})},fullMatchInItems:function(){for(var e=0,t=this.props.items.length;e<t;e++)if(this.props.items[e]===this.props.input)return!0;return!1},getItems:function(){return{items:this.props.items.map(this.itemToTag),fullMatch:this.fullMatchInItems()}},isSelected:function(e){return this.props.selected&&(e===this.props.selectedItem||this.props.single)},getAddBtn:function(e,t){var a=this.props.type||this.props.title,n=this.props.input,s=this.props.getCreateNewText||c;return!this.props.addNew||e||this.props.single?null:[this.props.items.length>0?r.default.createElement("span",{key:"cat_or",className:"cti__category__or"},"or"):null,r.default.createElement("button",{key:"add_btn",className:"cti__category__add-item"+(t?" cti-selected":""),onClick:this.onCreateNew},s(a,n))]},render:function(){var e=this.getItems(),t=e.items,a=e.fullMatch,n=this.getAddBtn(a,(0===t.length||this.props.selectedItem>=t.length)&&this.props.selected);return r.default.createElement("div",{className:"cti__category"},r.default.createElement("h5",{className:"cti__category__title"},this.props.title),r.default.createElement("div",{className:"cti__category__tags"},t,n))}});t.default=d,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(2),r=n(s),i=a(3),o=n(i),l=a(1),u=n(l),c=r.default.createClass({displayName:"Input",propTypes:{openPanel:u.default.func.isRequired,closePanel:u.default.func.isRequired,onValueChange:u.default.func.isRequired,onTagDeleted:u.default.func.isRequired,onKeyDown:u.default.func.isRequired,value:u.default.string.isRequired,tags:u.default.arrayOf(u.default.object).isRequired,placeholder:u.default.string,onBlur:u.default.func,getTagStyle:u.default.func,transformTag:u.default.func},focusInput:function(){this.refs.input.focus()},getDefaultProps:function(){return{getTagStyle:function(e){return{}},transformTag:function(e){return e.title}}},getTags:function(){var e=this;return this.props.tags.map(function(t,a){return r.default.createElement(o.default,{selected:!1,input:"",text:e.props.transformTag(t),addable:!1,deletable:!0,key:t.title+"_"+a,onDelete:function(){return e.props.onTagDeleted(a)},style:e.props.getTagStyle(t)})})},onBlur:function(e){this.props.closePanel(),"function"==typeof this.props.onBlur&&this.props.onBlur(e)},render:function(){var e=this.props.placeholder||"",t=0===this.props.value.length?e.length:this.props.value.length;return r.default.createElement("div",{className:"cti__input",onClick:this.focusInput},this.getTags(),r.default.createElement("input",{type:"text",ref:"input",value:this.props.value,size:t+2,onFocus:this.props.openPanel,onBlur:this.onBlur,onChange:this.props.onValueChange,onKeyDown:this.props.onKeyDown,placeholder:e,"aria-label":e,className:"cti__input__input"}),r.default.createElement("div",{className:"cti__input__arrow"}))}});t.default=c,e.exports=t.default},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(2),r=n(s),i=a(5),o=n(i),l=a(1),u=n(l),c=r.default.createClass({displayName:"Panel",propTypes:{categories:u.default.arrayOf(u.default.object).isRequired,selection:u.default.object.isRequired,onAdd:u.default.func.isRequired,input:u.default.string.isRequired,addNew:u.default.bool,getTagStyle:u.default.func,getCreateNewText:u.default.func},getCategories:function(){var e=this;return this.props.categories.map(function(t,a){return r.default.createElement(o.default,{key:t.id,items:t.items,category:t.id,title:t.title,selected:e.props.selection.category===a,selectedItem:e.props.selection.item,input:e.props.input,addNew:e.props.addNew,type:t.type,onAdd:e.props.onAdd,single:t.single,getTagStyle:e.props.getTagStyle,getCreateNewText:e.props.getCreateNewText})})},render:function(){return r.default.createElement("div",{className:"cti__panel"},this.getCategories())}});t.default=c,e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=9;t.TAB=a;var n=13;t.ENTER=n;var s=8;t.BACKSPACE=s;var r=37;t.LEFT=r;var i=38;t.UP=i;var o=39;t.RIGHT=o;var l=40;t.DOWN=l;var u=188;t.COMMA=u},function(e,t,a){"use strict";function n(){}function s(){}var r=a(10);s.resetWarningCache=n,e.exports=function(){function e(e,t,a,n,s,i){if(i!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:n};return a.PropTypes=a,a}},function(e,t){"use strict";var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=a}])});
//# sourceMappingURL=categorized-tag-input.js.map